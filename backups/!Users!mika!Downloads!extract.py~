import pickle
import io

def print_sentence(s):
  s1 = ""
  s2 = ""
  s3 = ""
  for word, table, label in s:
    l = max (len(word), len(label), len(table))
    s1 += "%*s" % (l + 2, word)
    s2 += "%*s" % (l + 2, table)
    s3 += "%*s" % (l + 2, label)
  print(s2)
  print(s3)
  print(s1)

train, test, dicts = pickle.load(open('atis.pkl', 'rb'), encoding='latin1')
idx2word ={v: k for k,v in dicts['words2idx'].items()}
idx2label ={v: k for k,v in dicts['labels2idx'].items()}
idx2table ={v: k for k,v in dicts['tables2idx'].items()}

sentences = []
for sentence, tables, labels in zip(*train):
  s = [idx2word[w] for w in sentence]
  t = [idx2table[l] for l in tables]
  l = [idx2label[l] for l in labels]
  sentences.append(list(zip(s, t, l)))

for s in sentences:
  print_sentence(s)
  print()
