swagger: '2.0'

info:
  version: "1.0.0"
  title: NLP API
  description: Provides simple Api to execute to parse relevant information from a message

basePath: /v1
schemes:
  - https

paths:
  /annotate:
    post:
      description: get annotations for an email message
      operationId: annotate
      parameters:
        - name: requestBody
          in: body
          description: message to annotate
          schema:
            $ref: '#/definitions/emailMessage'
      tags:
        - NLP
      responses:
        '200':
          description: Ok
          schema:
            $ref: '#/definitions/annotationResponse'
        '401':
          $ref: '#/responses/Unauthorized'

responses:
  Unauthorized:
    description: Unauthorized operation
    schema:
      $ref: '#/definitions/errorModel'

definitions:

  errorModel:
    required:
      - code
      - message
    properties:
      code:
        type: integer
        format: int32
      message:
        type: string

  emailMessage:
    required:
      - body
      - subject
      - date
      - from
    description: e-mail message to annotate
    properties:
      body:
        description: the actual message body
        type: string
      subject:
        description: the message subject
        type: string
      to:
        type: array
        items:
          $ref: '#/definitions/emailAddress'
        description: list of message recipients
        minLength: 1
      cc:
        type: array
        items:
          $ref: '#/definitions/emailAddress'
        description: list of cc'ed message recipients
        minLength: 0
      from:
        $ref: '#/definitions/emailAddress'
        description: unique message sender
      date:
        type: integer
        description: time of message receipt in miliseconds since the UTC epoch

  emailAddress:
    required:
      - email
    properties:
      email:
        type: string
        format: email
        description: the actual email adress
      name:
        type: string
        description: a string with a human readable name

  annotationResponse:
    properties:
      annotations:
        type: array
        items:
          oneOf: [
            { $ref: '#/definitions/annotation' }
            ]
        description: array of annotations
        
  annotation:
    properties:
      type:
        type: string