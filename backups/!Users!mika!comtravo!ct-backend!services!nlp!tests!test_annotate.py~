from nlp_api.app import create_app
from flask_testing import TestCase
import json


class AnnotateTest(TestCase):
    def create_app(self):
        app = create_app()
        app.app.config['TESTING'] = True
        return app.app

    def test_roundtrip(self):
        payload = json.dumps(
            {
                'body': 'Hallo Welt',
                'subject': 'A test',
                'from': {'email': 'test@test.com', 'name': 'Test User'},
                'to': [{'email': 'test@test.com', 'name': 'Test User'}],
                'cc': [],
                'date': 0
            })
        response = self.client.post('/v1/annotate',
                                    data=payload,
                                    headers={'Content-Type', 'application/json'})
        self.assertEqual(response.code, 200)
        
            
