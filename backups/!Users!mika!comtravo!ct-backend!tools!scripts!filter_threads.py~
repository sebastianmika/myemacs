def thread_is_boilerplate(first_msg):
    # Ignore threads starting with a sender in a email domain ending in ...
    ign_from_domains = ['accounts.google.com',
                        'aer.de',
                        'airberlin.com',
                        'airbnb.com',
                        'amadeus.com',
                        'artefacti.com',
                        'artefacti.de',
                        'austrian.com',
                        'baydin.com',
                        'comtravo.com',
                        'docs.google.com',
                        'easybooking.at',
                        'edigitalresearch.com',
                        'expedia.com',
                        'expediamail.com',
                        'feefo.com',
                        'hrs.com',
                        'hrs.de',
                        'klm-info.com',
                        'lufthansa.com',
                        'services.dlh.de',
                        'skype.com',
                        'tns-survey.com',
                        'tripcase.com',
                        'victors.de',
                        'omenahotels.com',
                        'cityhotel-ahlen.de',
                        'sns.amazonaws.com',
                        'waldorfastoria.com',
                        'support.zendesk.com',
                        'mcmeyersworld.de',
                        'ventureoutny.com',
                        'cayzuemail.com',
                        'mixmax.com',
                        'linkedin.com']
    # Ignore threads starting with a username in the from address
    # (i.e. user@example.com) containing these strings (any position)
    ign_from_user = ['noreply',
                     'mailer-daemon']
    # Ignore threads starting with messages from these senders
    blacklist_from = ['sales.nohfelden@victors.de',
                      'scarout88@gmail.com',
                      'imedialab.dnepr@gmail.com',
                      'toni.hellmuth@web.de',
                      'mail@michaelriegel.de',
                      'michael.riegel@whu.edu',
                      'thomas.pfleiderer@gmail.com',
                      'notify@google.com']
    # Ignore threads whose first subject contains these strings at any
    # position and case (i.e. all compared in lower case)
    blacklist_subject = ['Abwesenheitsnotiz',
                         'Bewerbung',
                         'Internship',
                         'Automatische Antwort',
                         'Abwesenheit',
                         'Erinnerung',
                         'Out of Office',
                         'Automatic reply',
                         'AWS Notification',
                         'Empfangsnachricht']
    for x in ign_from_domains:
        if first_msg['from']['email'].endswith(x):
            return True
    for x in ign_from_user:
        if x in first_msg['from']['email']:
            return True
    if first_msg['from']['email'] in blacklist_from:
        return True
    for x in blacklist_subject:
        if x.lower() in first_msg['subject'].lower():
            return True
    return False


def thread_starts_not_to_booking(first_msg):
    """A thread is excluded, iff the first message is not to booking@ or
    buchung@comtravo.com
    """
    return all([(f['email'] != 'booking@comtravo.com' and
                 f['email'] != 'buchung@comtravo.com') for f in first_msg['to']])


def skip_thread(first_msg):
    return (thread_is_boilerplate(first_msg) or
            thread_starts_not_to_booking(first_msg))
