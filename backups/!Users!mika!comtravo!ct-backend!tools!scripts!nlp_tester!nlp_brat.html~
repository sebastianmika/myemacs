<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Comtravo NLP Demo</title>
    <!-- brat -->
    <link rel="stylesheet" type="text/css" href="http://passenger:spacerace2016@54.229.183.160/style-vis.css"/>

    <!-- Bootstrap -->
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
          integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    
    <!-- font awseome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
          integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
            integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.6/handlebars.min.js"></script>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="page-header">
        <h1>NLP Service Demo</h1>
        <p class="lead">Simple demo of the nlp service.</p>
      </div>
      <div class="row clearfix">
        <div class="col-md-12 column">
          <div class="form-horizontal" role="form">
            <div class="form-group">
              <label for="from" class="col-sm-2 control-label">Sender</label>
              <div class="col-sm-4">
                <input type="text" class="form-control" id="from" placeholder="someone@example.com"
                       value="andrea.wissner@woodmark.de">
              </div>
              <label for="target" class="col-sm-2 control-label">Target</label>
              <div class="col-sm-4" id="target">
                <label class="radio-inline active">
                  <input type="radio" name="optradio" value="alpha">Alpha
                </label>
                <label class="radio-inline">
                  <input type="radio" name="optradio" value="production" checked="">Production
                </label>
              </div>
            </div>
            <div class="form-group">
              <label for="subejct" class="col-sm-2 control-label">Subject</label>
              <div class="col-sm-10">
                <input type="text" class="form-control" id="subject" placeholder="Flight Booking" value="Flugbuchung für Vincent">
              </div>
            </div>
            <div class="form-group">
              <label for="request" class="col-sm-2 control-label">Request</label>
              <div class="col-sm-10">
                <textarea class="form-control" id="request" placeholder="The request" rows="10">Liebes Comtravo Team,

ich bräuchte einen Flug:

Berlin - Nürnberg: 28.12. um 18:00 Uhr
Rückflug: Nürnberg -> Berlin: 30.12. um 12:00 Uhr

Vielen Dank und viele Grüße!</textarea>
              </div>
            </div>
            <div class="form-group">
              <label for="jwt" class="col-sm-2 control-label">Auth-Token</label>
              <div class="col-sm-10">
                <input type="text" class="form-control" id="jwt" placeholder="JWT ..." value="JWT eyJhbGciOiJSUzI1NiIsImtpZCI6Ii1wM3VyQSJ9.eyJpc3MiOiJodHRwczovL2lkZW50aXR5dG9vbGtpdC5nb29nbGUuY29tLyIsImF1ZCI6IjcyMDM3NzI5NDU5NS11MGpjN2lyNmJmZDR0MHNiMjdvNDIwNG12Z3ZybTQwNi5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsImlhdCI6MTQ4MjMwODAxMCwiZXhwIjoxNDgzNTE3NjEwLCJ1c2VyX2lkIjoiMDc3ODk0NDYwMDIwODgzODg4MDAyNTJEN0E5NzAzQjEyNjYzRjAyNUJDOEUiLCJlbWFpbCI6InNlYmFzdGlhbi5taWthQGNvbXRyYXZvLmNvbSIsInByb3ZpZGVyX2lkIjoiZ29vZ2xlLmNvbSIsInNpZ25faW5fcHJvdmlkZXIiOiJnb29nbGUuY29tIiwidmVyaWZpZWQiOnRydWUsInBob3RvX3VybCI6Imh0dHBzOi8vbGgzLmdvb2dsZXVzZXJjb250ZW50LmNvbS8tcmN6ME5wSnYtSTgvQUFBQUFBQUFBQUkvQUFBQUFBQUFBQW8vM3J3WDBQQmk1Q28vczk2LWMvcGhvdG8uanBnIn0.JQuQ_K5SuK8TYBt5sXF1XvDEcDtkjM1RL7VMkBD4ldGqoCWlpOeTtpWZS6Yn1orVhpZS_lBGGxPhYY7rLik6A74pyMIPeu_ZIq4bLBUmT9h1fZ-gC5ICn17KFdZuZ13pzJvkR9DixX7ET0J7I-S1RehGrjGvQfmbFBmPAXzd8jvWOP8aRI2mAA5vNUEMKBbNPHbgzlHsk6IEmrbifVSd5arRWBm7SJNI3698ZLA2BbwXKQe0oDOqZcSO24F1Fl4j-Z_jo1wSVrxYK_Q9LKuuY_ed4oMwxfpYKOGOCq2QPU4XL4qt6QWsuw8bemFwasxLICc1f5V-6up23rbAKJ3ZmA">
              </div>
            </div>
            <div class="form-group">
              <div class="col-sm-offset-2 col-sm-10">
                <button type="button"
                        class="btn btn-primary start"
                        id="submit"
                        data-loading-text="<i class='fa fa-refresh fa-spin'></i> Analyzing">
                  <i class="icon-upload icon-large"></i>
                  <span>Send</span>
                </button>
                <!-- <button type="button" class="btn btn-default" id="submit">Submit</button> -->
              </div>
            </div>
          </div>
        </div>
        <div class="row clearfix">
          <div class="col-sm-offset-0 col-sm-12">
            <span id="result"></span>
          </div>
          <script id="result_hb" type="text/x-handlebars-template">
            <div class="row well">
              <div class="col-sm-2">
                <div class="row"><b>P-Booking</b></div>
              </div>
              <div class="col-sm-10">
                <div class="row">{{#if p_booking}}{{fmtP p_booking}}{{else}}<em>not present</em>{{/if}}</div>
              </div>
              <div class="col-sm-2">
                <div class="row"><b>Language</b></div>
              </div>
              <div class="col-sm-10">
                <div class="row">{{#if language}}{{language}}{{else}}<em>not present</em>{{/if}}</div>
              </div>
              <div class="col-sm-2">
                <div class="row"><b>Companies</b></div>
              </div>
              <div class="col-sm-10">
                {{#if companies}}
                {{#each companies}}
                <div class="row">{{{resolve_company id}}} ({{id}}): {{fmtP probability}}</div>
                {{/each}}
                {{else}}
                <div class="row"><em>no companies found for sender</em></div>
                {{/if}}
              </div>
              <div class="col-sm-2">
                <div class="row"><b>Users</b></div>
              </div>
              <div class="col-sm-10">
                {{#if users}}
                {{#each users}}
                <div class="row">{{{resolve_user id}}} ({{id}}): {{#each roles}}<em>{{role}}={{fmtP probability}}</em> {{/each}}</div>
                {{/each}}
                {{else}}
                <div class="row"><em>no users found</em></div>
                {{/if}}
              </div>
              <div class="col-sm-2">
                <div class="row"><b>Content</b></div>
              </div>
              <div class="col-sm-10">
                {{#if content}}
                <table class="table table-sm" style="font-size: small; margin-left: -22px; margin-top: -7px; margin-bottom: 0px">
                  <thead>
                    <tr>
                      <th>Flight</th>
                      <th>Hotel</th>
                      <th>Train</th>
                      <th>Rental Car</th>
                      <th>Transfer</th>
                      <th>Other</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>{{fmtP content.flight}}</td>
                      <td>{{fmtP content.hotel}}</td>
                      <td>{{fmtP content.train}}</td>
                      <td>{{fmtP content.rental_car}}</td>
                      <td>{{fmtP content.transfer}}</td>
                      <td>{{fmtP content.other}}</td>
                    </tr>
                  </tbody>
                </table>
                {{else}}
                <div class="row"><em>content not present</em></div>
                {{/if}}  
              </div>
              <div class="col-sm-2">
                <div class="row"><b>Flight Requests</b></div>
              </div>
              <div class="col-sm-10"></div>
              <div class="col-sm-offset-1 col-sm-11">
                {{#each requests.flight_requests}}
                <div class="row">
                  <div class="col-sm-2">
                    <div class="row"><b>Probability</b></div>
                  </div>
                  <div class="col-sm-10">
                    <div class="row">{{fmtP probability}}</div>
                  </div>
                  <div class="col-sm-2">
                    <div class="row"><b>Slices</b></div>
                  </div>
                  <div class="col-sm-10">
                    {{#each slices}}
                    <div class="row">From {{{fmt_none origin.iata_code}}} ({{{fmt_none origin.text}}}) to {{{fmt_none destination.iata_code}}} ({{{fmt_none destination.text}}}), {{{fmt_dpt_arv this}}}: {{fmtP probability}}</div>
                    {{#if flight_number}}<div class="row">on flight {{flight_number.text}}</div>{{/if}}
                    <div class="col-sm-1">
                      <div class="row"></div>
                    </div>
                    <div class="col-sm-11">                   
                      {{#if cabin_class}}<div class="row">Cabin Class: {{cabin_class.cabin_class}}</div>{{/if}}
                      {{#if cancelable}}<div class="row">Cancelabel: {{cancelable.cancelable}}</div>{{/if}}
                      {{#if rebookable}}<div class="row">Rebookabel: {{rebookable.rebookable}}</div>{{/if}}
                      {{#if luggage}}<div class="row">Luggage: {{luggage.luggage}}</div>{{/if}}
                    </div>
                    {{/each}}
                  </div>
                  <div class="col-sm-2">
                    <div class="row"><b>Travelers</b></div>
                  </div>
                  <div class="col-sm-10">
                    {{#each travelers}}
                    <div class="row">{{{resolve_user id}}} ({{id}})</div>
                    {{/each}}
                  </div>
                </div>
                {{/each}}
              </div>
            </div>
          </script>
        </div>
        <div class="row clearfix">
          <div class="col-sm-offset-0 col-sm-12">
            <div id="brat_out"></div>
          </div>
        </div>
      </div>
    </div>
    <script src="nlp.js"></script>
  </body>
</html>
